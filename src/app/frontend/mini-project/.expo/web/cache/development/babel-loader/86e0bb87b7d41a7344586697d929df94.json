{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Projects\\\\ED1-Mini-Project\\\\src\\\\app\\\\frontend\\\\mini-project\\\\node_modules\\\\react-native-material-kit\\\\lib\\\\mdl\\\\Textfield.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, createRef } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FloatingLabel from \"../internal/textfield/FloatingLabel\";\nimport Underline from \"../internal/textfield/Underline\";\nimport MKColor from \"../MKColor\";\nimport { getTheme } from \"../theme\";\nvar defaultProps = {\n  style: {\n    height: 39\n  },\n  floatingLabelEnabled: true,\n  floatingLabelAniDuration: 200,\n  underlineEnabled: true,\n  underlineSize: 2\n};\n\nvar Textfield = function (_Component) {\n  _inherits(Textfield, _Component);\n\n  var _super = _createSuper(Textfield);\n\n  function Textfield(props) {\n    var _this;\n\n    _classCallCheck(this, Textfield);\n\n    _this = _super.call(this, props);\n    _this.theme = getTheme();\n    _this.inputRef = createRef();\n    _this.labelRef = createRef();\n    _this.underlineRef = createRef();\n\n    _this._onTextChange = function (text) {\n      _this.bufferedValue = text;\n\n      _this._callback('onTextChange', text);\n\n      _this._callback('onChangeText', text);\n    };\n\n    _this._onFocus = function (e) {\n      _this._aniStartHighlight(true);\n\n      _this._callback('onFocus', e);\n    };\n\n    _this._onBlur = function (e) {\n      _this._aniStopHighlight();\n\n      _this._callback('onBlur', e);\n    };\n\n    _this._doMeasurement = function () {\n      if (_this.inputRef.current) {\n        _this.inputRef.current.measure(_this._onInputMeasured);\n      }\n\n      if (_this.props.floatingLabelEnabled && _this.labelRef.current) {\n        _this.labelRef.current.measure(_this._onLabelMeasured);\n      }\n    };\n\n    _this._onLabelMeasured = function (left, top, width, height) {\n      _this.setState({\n        inputMarginTop: height\n      });\n    };\n\n    _this._onInputMeasured = function (left, top, width, height) {\n      _extends(_this.inputFrame, {\n        left: left,\n        top: top,\n        width: width,\n        height: height\n      });\n\n      if (_this.underlineRef.current) {\n        _this.underlineRef.current.updateLineLength(width, function () {\n          if (_this.bufferedValue || _this.isFocused()) {\n            _this._aniStartHighlight(_this.isFocused());\n          }\n        });\n      }\n    };\n\n    _this.inputFrame = {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    };\n    _this.state = {\n      inputMarginTop: 0\n    };\n    return _this;\n  }\n\n  _createClass(Textfield, [{\n    key: \"focus\",\n    value: function focus() {\n      this.inputRef.current && this.inputRef.current.focus();\n    }\n  }, {\n    key: \"isFocused\",\n    value: function isFocused() {\n      return (this.inputRef.current && this.inputRef.current.isFocused()) === true;\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.inputRef.current && this.inputRef.current.blur();\n    }\n  }, {\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      this.bufferedValue = this.props.value || this.props.defaultValue;\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var newText = nextProps.value || nextProps.defaultValue;\n\n      if (newText) {\n        this.bufferedValue = newText;\n      }\n\n      if (nextProps.value) {\n        this.bufferedValue = nextProps.value;\n      } else if (nextProps.defaultValue && this.props.defaultValue !== nextProps.defaultValue) {\n        this.bufferedValue = nextProps.defaultValue;\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      requestAnimationFrame(this._doMeasurement);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tfTheme = this.theme.textfieldStyle;\n      var floatingLabel = this.props.floatingLabelEnabled ? React.createElement(FloatingLabel, _extends({\n        ref: this.labelRef\n      }, this.props, {\n        label: this.props.placeholder,\n        tint: this.props.tint || tfTheme.tintColor,\n        highlightColor: this.props.highlightColor || tfTheme.highlightColor,\n        floatingLabelFont: this.props.floatingLabelFont || tfTheme.floatingLabelFont,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 66\n        }\n      })) : null;\n      var underline = React.createElement(Underline, _extends({\n        ref: this.underlineRef\n      }, this.props, {\n        tint: this.props.tint || tfTheme.tintColor,\n        highlightColor: this.props.highlightColor || tfTheme.highlightColor,\n        underlineAniDur: this.props.floatingLabelAniDuration,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 28\n        }\n      }));\n      return React.createElement(View, {\n        style: this.props.style,\n        onLayout: this._doMeasurement,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, floatingLabel, React.createElement(TextInput, _extends({\n        ref: this.inputRef\n      }, this.props, this.props.additionalInputProps, {\n        style: [{\n          backgroundColor: MKColor.Transparent,\n          alignSelf: 'stretch',\n          paddingTop: 2,\n          paddingBottom: 2,\n          marginTop: this.state.inputMarginTop\n        }, tfTheme.textInputStyle, this.props.textInputStyle],\n        onChangeText: this._onTextChange,\n        onFocus: this._onFocus,\n        onBlur: this._onBlur,\n        secureTextEntry: this.props.password,\n        underlineColorAndroid: \"transparent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }\n      })), underline);\n    }\n  }, {\n    key: \"startAnimations\",\n    value: function startAnimations(animations, cb) {\n      if (animations.length) {\n        this.anim && this.anim.stop();\n        this.anim = Animated.parallel(animations);\n        this.anim.start(cb);\n      }\n    }\n  }, {\n    key: \"_aniFloatLabel\",\n    value: function _aniFloatLabel() {\n      if (this.bufferedValue && this.props.floatingLabelEnabled && this.labelRef.current) {\n        this.startAnimations(this.labelRef.current.aniFloatLabel());\n      }\n    }\n  }, {\n    key: \"_aniStartHighlight\",\n    value: function _aniStartHighlight(focused) {\n      if (this.props.floatingLabelEnabled) {\n        this.placeholder = '';\n\n        if (this.labelRef.current) {\n          this.labelRef.current.updateLabel(this.props.placeholder || '');\n        }\n      }\n\n      if (this.underlineRef.current && this.labelRef.current) {\n        this.startAnimations([].concat(_toConsumableArray(this.underlineRef.current.aniStretchUnderline(focused)), _toConsumableArray(this.labelRef.current.aniFloatLabel())));\n      }\n    }\n  }, {\n    key: \"_aniStopHighlight\",\n    value: function _aniStopHighlight() {\n      var _this2 = this;\n\n      if (this.underlineRef.current && this.labelRef.current) {\n        var onEnd = function onEnd() {\n          if (_this2.props.floatingLabelEnabled) {\n            _this2.placeholder = _this2.props.placeholder || '';\n\n            if (!_this2.bufferedValue && _this2.labelRef.current) {\n              _this2.labelRef.current.updateLabel('');\n            }\n          }\n        };\n\n        this.startAnimations([].concat(_toConsumableArray(this.underlineRef.current.aniShrinkUnderline()), _toConsumableArray(!this.bufferedValue ? this.labelRef.current.aniSinkLabel() : [])), onEnd);\n      }\n    }\n  }, {\n    key: \"_callback\",\n    value: function _callback(prop, evt) {\n      var props = this.props;\n      props[prop] && props[prop](evt);\n    }\n  }, {\n    key: \"bufferedValue\",\n    set: function set(v) {\n      this._bufferedValue = v;\n\n      if (v) {\n        this._aniFloatLabel();\n      }\n    },\n    get: function get() {\n      return (this._bufferedValue || '').trim();\n    }\n  }, {\n    key: \"placeholder\",\n    set: function set(placeholder) {\n      this.inputRef.current && this.inputRef.current.setNativeProps({\n        placeholder: placeholder,\n        text: this._bufferedValue\n      });\n    }\n  }]);\n\n  return Textfield;\n}(Component);\n\nexport { Textfield as default };\nTextfield.defaultProps = defaultProps;","map":{"version":3,"sources":["C:/Projects/ED1-Mini-Project/src/app/frontend/mini-project/node_modules/react-native-material-kit/lib/mdl/Textfield.js"],"names":["React","Component","createRef","FloatingLabel","Underline","MKColor","getTheme","defaultProps","style","height","floatingLabelEnabled","floatingLabelAniDuration","underlineEnabled","underlineSize","Textfield","props","theme","inputRef","labelRef","underlineRef","_onTextChange","text","bufferedValue","_callback","_onFocus","e","_aniStartHighlight","_onBlur","_aniStopHighlight","_doMeasurement","current","measure","_onInputMeasured","_onLabelMeasured","left","top","width","setState","inputMarginTop","inputFrame","updateLineLength","isFocused","state","focus","blur","value","defaultValue","nextProps","newText","requestAnimationFrame","tfTheme","textfieldStyle","floatingLabel","placeholder","tint","tintColor","highlightColor","floatingLabelFont","underline","additionalInputProps","backgroundColor","Transparent","alignSelf","paddingTop","paddingBottom","marginTop","textInputStyle","password","animations","cb","length","anim","stop","Animated","parallel","start","startAnimations","aniFloatLabel","focused","updateLabel","aniStretchUnderline","onEnd","aniShrinkUnderline","aniSinkLabel","prop","evt","v","_bufferedValue","_aniFloatLabel","trim","setNativeProps"],"mappings":"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","sourcesContent":["/**\n * MDL style textfield component.\n *\n * See {@link http://www.getmdl.io/components/index.html#textfields-section | MDL Textfield}\n *\n * Created by ywu on 15/8/3.\n */\nimport React, { Component, createRef } from 'react';\nimport { Animated, TextInput, View, } from 'react-native';\nimport FloatingLabel from '../internal/textfield/FloatingLabel';\nimport Underline from '../internal/textfield/Underline';\nimport MKColor from '../MKColor';\nimport { getTheme } from '../theme';\n/** Default props of the {@link Textfield} component */\nconst defaultProps = {\n    // tintColor: 'rgba(0,0,0,.12)',\n    // highlightColor: getTheme().primaryColor,\n    // floatingLabelFont: {\n    //   fontSize: getTheme().fontSize - 2,\n    // },\n    style: {\n        height: 39,\n    },\n    // textInputStyle: {\n    //   color: getTheme().fontColor,\n    //   fontSize: getTheme().fontSize + 2,\n    //   paddingLeft: 0,\n    //   paddingRight: 0,\n    // },\n    floatingLabelEnabled: true,\n    floatingLabelAniDuration: 200,\n    underlineEnabled: true,\n    underlineSize: 2,\n};\n/**\n * The `Textfield` component, which has an optional {@link FloatingLabel} and {@link Underline}.\n * - TODO styling `read-only` & `disabled` mode\n */\nexport default class Textfield extends Component {\n    constructor(props) {\n        super(props);\n        this.theme = getTheme();\n        this.inputRef = createRef();\n        this.labelRef = createRef();\n        this.underlineRef = createRef();\n        this._onTextChange = (text) => {\n            this.bufferedValue = text;\n            this._callback('onTextChange', text);\n            this._callback('onChangeText', text);\n        };\n        this._onFocus = (e) => {\n            this._aniStartHighlight(true);\n            this._callback('onFocus', e);\n        };\n        this._onBlur = (e) => {\n            this._aniStopHighlight();\n            this._callback('onBlur', e);\n        };\n        this._doMeasurement = () => {\n            if (this.inputRef.current) {\n                this.inputRef.current.measure(this._onInputMeasured);\n            }\n            if (this.props.floatingLabelEnabled && this.labelRef.current) {\n                this.labelRef.current.measure(this._onLabelMeasured);\n            }\n        };\n        this._onLabelMeasured = (left, top, width, height) => {\n            this.setState({ inputMarginTop: height });\n        };\n        this._onInputMeasured = (left, top, width, height) => {\n            Object.assign(this.inputFrame, { left, top, width, height });\n            if (this.underlineRef.current) {\n                this.underlineRef.current.updateLineLength(width, () => {\n                    if (this.bufferedValue || this.isFocused()) {\n                        this._aniStartHighlight(this.isFocused()); // if input not empty, lift the label\n                    }\n                });\n            }\n        };\n        this.inputFrame = { left: 0, top: 0, width: 0, height: 0 };\n        this.state = {\n            inputMarginTop: 0,\n        };\n    }\n    set bufferedValue(v) {\n        this._bufferedValue = v;\n        if (v) {\n            this._aniFloatLabel();\n        }\n    }\n    get bufferedValue() {\n        return (this._bufferedValue || '').trim();\n    }\n    set placeholder(placeholder) {\n        this.inputRef.current &&\n            this.inputRef.current.setNativeProps({\n                placeholder,\n                text: this._bufferedValue,\n            });\n    }\n    /**\n     * Requests focus for the given input or view. The exact behavior triggered\n     * will depend on the platform and type of view.\n     */\n    focus() {\n        this.inputRef.current && this.inputRef.current.focus();\n    }\n    /**\n     * Checks if the input is currently focused.\n     */\n    isFocused() {\n        return (this.inputRef.current && this.inputRef.current.isFocused()) === true;\n    }\n    /**\n     * Removes focus from an input or view. This is the opposite of `focus()`.\n     */\n    blur() {\n        this.inputRef.current && this.inputRef.current.blur();\n    }\n    UNSAFE_componentWillMount() {\n        this.bufferedValue = this.props.value || this.props.defaultValue;\n    }\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        const newText = nextProps.value || nextProps.defaultValue;\n        if (newText) {\n            this.bufferedValue = newText;\n        }\n        if (nextProps.value) {\n            this.bufferedValue = nextProps.value;\n        }\n        else if (nextProps.defaultValue && this.props.defaultValue !== nextProps.defaultValue) {\n            // use defaultValue if it's changed\n            this.bufferedValue = nextProps.defaultValue;\n        }\n    }\n    componentDidMount() {\n        requestAnimationFrame(this._doMeasurement);\n    }\n    render() {\n        const tfTheme = this.theme.textfieldStyle;\n        const floatingLabel = this.props.floatingLabelEnabled ? (<FloatingLabel ref={this.labelRef} {...this.props} label={this.props.placeholder} tint={this.props.tint || tfTheme.tintColor} highlightColor={this.props.highlightColor || tfTheme.highlightColor} floatingLabelFont={this.props.floatingLabelFont || tfTheme.floatingLabelFont}/>) : null;\n        const underline = (<Underline ref={this.underlineRef} {...this.props} tint={this.props.tint || tfTheme.tintColor} highlightColor={this.props.highlightColor || tfTheme.highlightColor} underlineAniDur={this.props.floatingLabelAniDuration}/>);\n        return (<View style={this.props.style} onLayout={this._doMeasurement}>\n        {floatingLabel}\n        <TextInput ref={this.inputRef} {...this.props} {...this.props.additionalInputProps} style={[\n            {\n                backgroundColor: MKColor.Transparent,\n                alignSelf: 'stretch',\n                paddingTop: 2,\n                paddingBottom: 2,\n                marginTop: this.state.inputMarginTop,\n            },\n            tfTheme.textInputStyle,\n            this.props.textInputStyle,\n        ]} onChangeText={this._onTextChange} onFocus={this._onFocus} onBlur={this._onBlur} secureTextEntry={this.props.password} underlineColorAndroid=\"transparent\"/>\n        {underline}\n      </View>);\n    }\n    startAnimations(animations, cb) {\n        if (animations.length) {\n            this.anim && this.anim.stop();\n            this.anim = Animated.parallel(animations);\n            this.anim.start(cb);\n        }\n    }\n    _aniFloatLabel() {\n        if (this.bufferedValue && this.props.floatingLabelEnabled && this.labelRef.current) {\n            this.startAnimations(this.labelRef.current.aniFloatLabel());\n        }\n    }\n    // animation when textfield focused\n    _aniStartHighlight(focused) {\n        if (this.props.floatingLabelEnabled) {\n            // hide fixed placeholder, if floating\n            this.placeholder = '';\n            // and show floating label\n            // FIXME workaround https://github.com/facebook/react-native/issues/3220\n            if (this.labelRef.current) {\n                this.labelRef.current.updateLabel(this.props.placeholder || '');\n            }\n        }\n        if (this.underlineRef.current && this.labelRef.current) {\n            this.startAnimations([\n                ...this.underlineRef.current.aniStretchUnderline(focused),\n                ...this.labelRef.current.aniFloatLabel(),\n            ]);\n        }\n    }\n    // animation when textfield lost focus\n    _aniStopHighlight() {\n        if (this.underlineRef.current && this.labelRef.current) {\n            const onEnd = () => {\n                if (this.props.floatingLabelEnabled) {\n                    // show fixed placeholder after floating label collapsed\n                    this.placeholder = this.props.placeholder || '';\n                    // and hide floating label\n                    // FIXME workaround https://github.com/facebook/react-native/issues/3220\n                    if (!this.bufferedValue && this.labelRef.current) {\n                        this.labelRef.current.updateLabel('');\n                    }\n                }\n            };\n            this.startAnimations([\n                ...this.underlineRef.current.aniShrinkUnderline(),\n                ...(!this.bufferedValue ? this.labelRef.current.aniSinkLabel() : []),\n            ], onEnd);\n        }\n    }\n    _callback(prop, evt) {\n        const props = this.props;\n        props[prop] && props[prop](evt);\n    }\n}\n/** Defaults, see {@link defaultProps} */\nTextfield.defaultProps = defaultProps;\n//# sourceMappingURL=Textfield.js.map"]},"metadata":{},"sourceType":"module"}